<!DOCTYPE html>
<html lang="ru" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Content Analyzer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body class="h-full bg-gray-50">
    <div id="app" class="h-full flex flex-col">
        <!-- Header Component -->
        <app-header :current-time="currentTime"></app-header>

        <!-- Navigation Component -->
        <app-navigation 
            :tabs="tabs" 
            :active-tab="activeTab" 
            @update:active-tab="activeTab = $event">
        </app-navigation>

        <!-- Main Content -->
        <main class="flex-1 overflow-y-auto">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                <transition name="fade" mode="out-in">
                    <!-- Parsing Tab -->
                    <parsing-tab 
                        v-if="activeTab === 'parsing'"
                        :search-form="searchForm"
                        :is-searching="isSearching"
                        :recent-queries="recentQueries"
                        @start-parsing="startParsing"
                        @repeat-search="repeatSearch">
                    </parsing-tab>

                    <!-- Videos Tab -->
                    <videos-tab 
                        v-else-if="activeTab === 'videos'"
                        :videos="videos"
                        :video-filters="videoFilters"
                        :view-mode="viewMode"
                        :show-filters="showFilters"
                        :show-export-menu="showExportMenu"
                        @update:view-mode="viewMode = $event"
                        @update:show-filters="showFilters = $event"
                        @update:show-export-menu="showExportMenu = $event"
                        @update:video-filters="videoFilters = $event"
                        @export-videos="exportVideos"
                        @view-video="viewVideo"
                        @toggle-filters="toggleFilters"
                        @apply-filters="applyFilters"
                        @reset-all-filters="resetAllFilters">
                    </videos-tab>

                    <!-- Channels Tab -->
                    <channels-tab 
                        v-else-if="activeTab === 'channels'"
                        :channels="channels"
                        :channel-filters="channelFilters"
                        :channel-view-mode="channelViewMode"
                        :show-channel-export-menu="showChannelExportMenu"
                        @update:channel-view-mode="channelViewMode = $event"
                        @update:show-channel-export-menu="showChannelExportMenu = $event"
                        @update:channel-filters="channelFilters = $event"
                        @export-channels="exportChannels"
                        @view-channel="viewChannel">
                    </channels-tab>

                    <!-- Tasks Tab -->
                    <tasks-tab 
                        v-else-if="activeTab === 'tasks'"
                        :tasks="tasks"
                        :active-tasks="activeTasks"
                        :paused-tasks="pausedTasks"
                        :completed-tasks="completedTasks"
                        @pause-task="pauseTask"
                        @resume-task="resumeTask"
                        @cancel-task="cancelTask"
                        @pause-all-tasks="pauseAllTasks"
                        @resume-all-tasks="resumeAllTasks"
                        @clear-completed-tasks="clearCompletedTasks">
                    </tasks-tab>

                    <!-- Analytics Tab -->
                    <analytics-tab 
                        v-else-if="activeTab === 'analytics'"
                        :stats="stats"
                        :top-videos="topVideos"
                        :videos="videos"
                        @view-video="viewVideo">
                    </analytics-tab>

                    <!-- Settings Tab -->
                    <settings-tab 
                        v-else-if="activeTab === 'settings'"
                        :settings="settings"
                        @update:settings="settings = $event"
                        @save-settings="saveSettings"
                        @export-database="exportDatabase"
                        @import-database="importDatabase">
                    </settings-tab>

                    <!-- Help Tab -->
                    <help-tab v-else-if="activeTab === 'help'"></help-tab>
                </transition>
            </div>
        </main>

        <!-- Video Detail Modal -->
        <video-modal 
            v-if="selectedVideo"
            :video="selectedVideo"
            @close="selectedVideo = null">
        </video-modal>

        <!-- Channel Detail Modal -->
        <channel-modal 
            v-if="selectedChannel"
            :channel="selectedChannel"
            @close="selectedChannel = null">
        </channel-modal>

        <!-- Notification Toast -->
        <notification-toast 
            v-if="notification"
            :notification="notification"
            @close="notification = null">
        </notification-toast>
    </div>

    <!-- Load Components -->
    <script src="components/header.js"></script>
    <script src="components/navigation.js"></script>
    <script src="components/parsing-tab.js"></script>
    <script src="components/videos-tab.js"></script>
    <script src="components/channels-tab.js"></script>
    <script src="components/tasks-tab.js"></script>
    <script src="components/analytics-tab.js"></script>
    <script src="components/settings-tab.js"></script>
    <script src="components/help-tab.js"></script>
    <script src="components/video-modal.js"></script>
    <script src="components/channel-modal.js"></script>
    <script src="components/notification-toast.js"></script>
    
    <!-- Load Utils -->
    <script src="utils/helpers.js"></script>
    
    <!-- Main App -->
    <script src="app.js"></script>
</body>
</html>
