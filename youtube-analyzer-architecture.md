# YouTube Analyzer - Архитектура проекта

## Структура файлов (15 файлов)

```
C:\youtube-analyzer\
├── .env                    # Конфигурация
├── requirements.txt        # Зависимости Python
├── docker-compose.yml      # Docker конфигурация
├── main.py                # Точка входа приложения
├── models.py              # Модели базы данных
├── youtube_api.py         # YouTube API клиент
├── analyzer.py            # Логика анализа видео
├── tasks.py               # Система задач с возможностью паузы
├── database.py            # Работа с SQLite
├── api.py                 # FastAPI endpoints
├── websocket.py           # WebSocket для real-time обновлений
├── index.html             # Единый HTML файл с Vue.js
├── styles.css             # Tailwind CSS стили
├── app.js                 # Frontend логика
└── youtube_data.db        # База данных SQLite
```

## Технологический стек

### Backend:
- **FastAPI** - асинхронный веб-фреймворк
- **SQLite** - локальная база данных
- **youtube-dl / yt-dlp** - для расширенного парсинга
- **Google YouTube API v3** - официальный API
- **Celery + Redis** - очередь задач с возможностью паузы
- **WebSockets** - real-time обновления

### Frontend:
- **Vue.js 3** - реактивный интерфейс
- **Tailwind CSS** - современный дизайн
- **Chart.js** - визуализация аналитики
- **Axios** - HTTP запросы

## Ключевые особенности

### 1. Система задач с сохранением состояния
- Каждая задача сохраняет прогресс в БД
- Возможность паузы/возобновления
- Восстановление после перезапуска системы

### 2. Микросервисная архитектура
- API Gateway (FastAPI)
- Parser Service (YouTube API + yt-dlp)
- Analytics Service (анализ контента)
- Task Manager (Celery)
- Database Service (SQLite)

### 3. Оптимизация для Windows 11
- Легковесные процессы
- Минимальное потребление ресурсов
- Graceful shutdown при выключении ПК

## Основные компоненты

### 1. `main.py` - Точка входа
```python
# Запуск всех сервисов
# Управление жизненным циклом
# Graceful shutdown
```

### 2. `models.py` - Модели данных
```python
# SQLAlchemy модели для всех таблиц
# Включая все 40+ параметров видео
```

### 3. `youtube_api.py` - YouTube клиент
```python
# Интеграция с YouTube API
# Fallback на yt-dlp для недоступных данных
# Управление квотами API
```

### 4. `analyzer.py` - Анализ контента
```python
# NLP анализ транскриптов
# Определение паттернов успешности
# Генерация рекомендаций
# AI-powered инсайты
```

### 5. `tasks.py` - Менеджер задач
```python
# Celery tasks с сохранением состояния
# Поддержка паузы/возобновления
# Приоритеты задач
# Прогресс-бары
```

### 6. `api.py` - REST API
```python
# FastAPI endpoints
# WebSocket для real-time обновлений
# Аутентификация (опционально)
```

### 7. `index.html` - Single Page Application
```html
<!-- Vue.js приложение -->
<!-- Tailwind CSS -->
<!-- Компоненты: Videos, Tasks, Analytics, Settings -->
```

## Функциональность

### Вкладка "Парсинг"
- Поиск по ключевым словам
- Парсинг каналов
- Фильтры: shorts/long, дата/популярность
- Bulk операции

### Вкладка "Видео"
- Таблица/карточки с превью
- Сортировка и фильтрация
- Детальная страница видео
- Экспорт данных

### Вкладка "Задачи"
- Список активных задач
- Прогресс-бары
- Кнопки пауза/возобновление
- История выполненных задач

### Вкладка "Аналитика"
- Графики и диаграммы
- Тренды по нише
- Рекомендации по контент-стратегии
- AI-инсайты

### Вкладка "Настройки"
- API ключи
- Параметры парсинга
- Расписание задач
- Экспорт/импорт данных

## Установка и запуск

```bash
# 1. Клонировать репозиторий
git clone https://github.com/team500-top/yt-contentpipeline/
cd youtube-analyzer

# 2. Создать виртуальное окружение
python -m venv venv
venv\Scripts\activate

# 3. Установить зависимости
pip install -r requirements.txt

# 4. Запустить Redis (через Docker)
docker-compose up -d redis

# 5. Запустить Celery worker
celery -A tasks worker --loglevel=info

# 6. Запустить приложение
python main.py
```

## Преимущества архитектуры

1. **Масштабируемость** - легко добавлять новые функции
2. **Отказоустойчивость** - сохранение состояния задач
3. **Производительность** - асинхронная обработка
4. **Простота** - всего 15 файлов
5. **Современный UI** - Tailwind + Vue.js
6. **Локальная работа** - не требует облака

## Дополнительные возможности

1. **AI-анализ контента** - интеграция с GPT для глубокого анализа
2. **Автоматическая генерация контент-плана**
3. **Мониторинг конкурентов в реальном времени**
4. **Экспорт отчетов в PDF/Excel**
5. **Telegram/Discord уведомления**
6. **Batch processing для больших объемов**
7. **Кэширование для экономии API квот**